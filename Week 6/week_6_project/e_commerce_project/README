# E-Commerce Backend

## What Is This Project About?

This is a fully functional REST API backend for a modern e-commerce platform. It was built as a **teaching sample** to demonstrate how to structure a production-ready backend for an online store.

The project showcases authentication, product management, cart functionality, checkout flow, order processing, admin operations, and more â€” all using clean architecture principles.

---

## Project Structure

```
ecommerce-api/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ __init__.py          
â”‚   â”œâ”€â”€ config.py            
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ __init__.py      
â”‚   â”‚   â”œâ”€â”€ user.py          # User model (auth, roles)
â”‚   â”‚   â”œâ”€â”€ product.py       # Product, Category, Review models
â”‚   â”‚   â”œâ”€â”€ cart.py          # Cart, CartItem models
â”‚   â”‚   â”œâ”€â”€ order.py         # Order, OrderItem models
â”‚   â”‚   â””â”€â”€ recommendation.py # Recommendation model
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ auth.py          # Login, register, profile routes
â”‚   â”‚   â”œâ”€â”€ products.py      # Product CRUD + reviews
â”‚   â”‚   â”œâ”€â”€ cart.py          # Shopping cart operations
â”‚   â”‚   â”œâ”€â”€ orders.py        # Checkout + order history
â”‚   â”‚   â”œâ”€â”€ payments.py      # Payment processing
â”‚   â”‚   â””â”€â”€ admin.py         # Admin dashboard + management
â”‚   â”œâ”€â”€ schemas/
â”‚   â”‚   â”œâ”€â”€ user_schema.py   # Input validation for user routes
â”‚   â”‚   â””â”€â”€ product_schema.py # Input validation for products
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ helpers.py       # Response helpers + decorators
â”‚       â””â”€â”€ email.py         # Email notifications
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ conftest.py          # Fixtures (test setup)
â”‚   â”œâ”€â”€ test_auth.py         # Auth route tests
â”‚   â””â”€â”€ test_products.py     # Product + cart tests
â”œâ”€â”€ migrations/              # Database migration files
â”‚   â””â”€â”€ README               # Migration instructions
â”œâ”€â”€ Dockerfile               # Container build instructions
â”œâ”€â”€ docker-compose.yml       # Multi-container setup (API + DB)
â”œâ”€â”€ requirements.txt         # Python dependencies
â”œâ”€â”€ .env.example             # Environment variable template
â””â”€â”€ run.py                   # Application entry point + CLI commands
```

---

## ğŸš€ Quick Start (Local Development)

### Prerequisites

* Python 3.11+
* PostgreSQL 14+ running locally

### Step 1: Clone and Set Up

```bash
# Create virtual environment
python -m venv venv

# Activate it
source venv/bin/activate        # Mac/Linux
.\venv\Scripts\activate         # Windows

# Install dependencies
pip install -r requirements.txt
```

### Step 2: Configure Environment

```bash
# Copy the example env file
cp .env.example .env

# Edit .env with your database credentials
# At minimum, update DATABASE_URL
```

### Step 3: Set Up Database

```bash
# Create the database in PostgreSQL:
# psql -U postgres -c "CREATE DATABASE ecommerce_db;"

# Apply all migrations
flask db upgrade

# Populate with sample data
flask seed-db
```

### Step 4: Run the App

```bash
flask run
# API is now at http://localhost:5000
# Test with: GET http://localhost:5000/api/health
```

---

## ğŸ³ Docker Start (Easier Setup)

```bash
docker-compose up --build

# In a new terminal:
docker-compose exec api flask seed-db

# API runs at http://localhost:5000
```

---

## ğŸ§ª Running Tests

```bash
pytest
pytest --cov=app --cov-report=term-missing
pytest tests/test_auth.py -v
pytest tests/test_auth.py::TestLogin::test_login_valid_credentials_returns_tokens -v
```

Target: **70%+ code coverage**

---

## ğŸ“¡ API Endpoints Reference

### Authentication (`/api/auth`)

| Method | Endpoint           | Auth          | Description            |
| ------ | ------------------ | ------------- | ---------------------- |
| POST   | `/register`        | None          | Create account         |
| POST   | `/login`           | None          | Login & receive tokens |
| POST   | `/refresh`         | Refresh Token | Get new access token   |
| GET    | `/me`              | Bearer Token  | Get own profile        |
| PUT    | `/me`              | Bearer Token  | Update profile         |
| POST   | `/change-password` | Bearer Token  | Change password        |

---

### Products (`/api/products`)

| Method | Endpoint        | Auth     | Description                                 |
| ------ | --------------- | -------- | ------------------------------------------- |
| GET    | `/`             | None     | List products (filters, search, pagination) |
| GET    | `/<id>`         | None     | Get product details                         |
| POST   | `/`             | Admin    | Create product                              |
| PUT    | `/<id>`         | Admin    | Update product                              |
| DELETE | `/<id>`         | Admin    | Soft-delete product                         |
| GET    | `/categories`   | None     | List categories                             |
| POST   | `/<id>/reviews` | Customer | Add review                                  |

---

### Cart (`/api/cart`)

| Method | Endpoint      | Auth     | Description     |
| ------ | ------------- | -------- | --------------- |
| GET    | `/`           | Customer | View cart       |
| POST   | `/items`      | Customer | Add item        |
| PUT    | `/items/<id>` | Customer | Update quantity |
| DELETE | `/items/<id>` | Customer | Remove item     |
| DELETE | `/`           | Customer | Clear cart      |

---

### Orders (`/api/orders`)

| Method | Endpoint       | Auth     | Description   |
| ------ | -------------- | -------- | ------------- |
| POST   | `/`            | Customer | Checkout      |
| GET    | `/`            | Customer | Order history |
| GET    | `/<id>`        | Customer | Order details |
| POST   | `/<id>/cancel` | Customer | Cancel order  |

---

### Payments (`/api/payments`)

| Method | Endpoint   | Auth     | Description         |
| ------ | ---------- | -------- | ------------------- |
| POST   | `/process` | Customer | Process payment     |
| GET    | `/<id>`    | Customer | View payment status |

---

### Admin (`/api/admin`)

| Method | Endpoint                    | Auth  | Description         |
| ------ | --------------------------- | ----- | ------------------- |
| GET    | `/dashboard`                | Admin | Sales statistics    |
| GET    | `/users`                    | Admin | All users           |
| PUT    | `/users/<id>/toggle-status` | Admin | Activate/deactivate |
| GET    | `/orders`                   | Admin | All orders          |
| PUT    | `/orders/<id>/status`       | Admin | Update order status |
| GET    | `/inventory`                | Admin | Inventory levels    |
| PUT    | `/inventory/<id>`           | Admin | Update stock        |

---

## ğŸ” Authentication Flow

```
1. Login
   POST /api/auth/login
   Body: { "email": "...", "password": "..." }

2. Receive:
   {
     "access_token": "...",
     "refresh_token": "..."
   }

3. Include token in requests:
   Authorization: Bearer eyJ...

4. Refresh when expired:
   POST /api/auth/refresh
```

---

## ğŸ’¡ Example API Requests (curl)

```bash
# Register
curl -X POST http://localhost:5000/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{"email":"john@test.com","password":"TestPass123"}'

# Login
curl -X POST http://localhost:5000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"john@test.com","password":"TestPass123"}'

# List products
curl http://localhost:5000/api/products/

# Search products
curl "http://localhost:5000/api/products/?search=laptop&in_stock=true"

# Add to cart
curl -X POST http://localhost:5000/api/cart/items \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"product_id":1,"quantity":2}'

# Checkout
curl -X POST http://localhost:5000/api/orders/ \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"delivery_address":"123 Main St"}'
```

---

## ğŸ—„ï¸ Database Design

```
users (id, email, password_hash, role, ...)
  â†“ has many
orders (id, user_id, status, total_amount, ...)
  â†“ has many
order_items (id, order_id, product_id, price_at_purchase, ...)
              â†‘
products (id, name, price, stock_quantity, ...)
  â†‘ belongs to
categories (id, name, parent_id, ...)

users â† carts â†’ cart_items â†’ products
users â†’ payments
```

---

## ğŸ“¦ Core E-Commerce Features

* Product catalog with categories
* Product reviews & ratings
* Shopping cart system
* Secure checkout
* Order tracking
* Inventory management
* Role-based admin dashboard
* Email notifications for orders
* Soft delete pattern for product safety
* Price snapshot pattern for historical accuracy

---

## ğŸ“ Key Learning Concepts

| Concept                     | Location                           |
| --------------------------- | ---------------------------------- |
| Application Factory Pattern | `app/__init__.py`                  |
| Environment Config          | `app/config.py`                    |
| SQLAlchemy ORM              | `app/models/*.py`                  |
| JWT Authentication          | `app/routes/auth.py`               |
| Role-Based Access Control   | `app/utils/helpers.py`             |
| Pagination                  | `app/routes/products.py`           |
| Soft Delete                 | `app/routes/products.py`           |
| Price Snapshot Pattern      | `app/models/order.py`              |
| Email Notifications         | `app/utils/email.py`               |
| Docker Setup                | `Dockerfile`, `docker-compose.yml` |
| Database Migrations         | `migrations/README`                |

---

If youâ€™d like, I can also:

* ğŸ”¥ Make it more production-level (for portfolio)
* ğŸ¯ Rewrite it to sound like a real startup product
* ğŸ“„ Shorten it for GitHub recruiters
* ğŸ§  Add architecture diagram explanation section
* ğŸ’¼ Tailor it for job applications

Tell me what direction you're aiming for.
